\documentclass{article}

\usepackage{xparse}
\usepackage{tikz}
\usepackage{ifthen}
\usetikzlibrary{calc,positioning}
\usetikzlibrary{automata,arrows} 
\usetikzlibrary{fit,chains}
\input{box_sty}
\input{record_sty}


\usepackage{verbatim}
\usepackage[paperwidth=800pt,paperheight=1250pt]{geometry}


\begin{document}

\begin{tikzpicture}[auto,>=latex']
\node (automc) at (435.0bp,29.0bp) {
\begin{tikzpicture}[>=stealth',auto,scale = 1, transform shape]
  \begin{scope}[shift={(364.5bp,-10.0bp)}]
\draw [color=blue!50,very thick,fill=blue!20](18.0bp,18.0bp) ellipse (16.0bp and 16.0bp);
\draw (18.0bp,18.0bp);
\draw [fill](18.0bp,76.0bp) ellipse (1.244448bp and 1.6bp);

\draw [-,thick] (35.782bp,21.236bp).. controls (45.315bp,21.786bp) and (54.0bp,20.707bp) .. (54.0bp,18.0bp);
\draw [-,thick] (54.0bp,18.0bp).. controls (54.0bp,16.35bp) and (50.775bp,15.306bp) .. (46.098bp,14.865bp);
\draw (59.0bp,18.0bp) node {$\begin{array}{c}p\end{array}$};
\draw [-,thick] (32.927bp,28.497bp).. controls (50.897bp,36.429bp) and (72.0bp,32.93bp) .. (72.0bp,18.0bp);
\draw [-,thick] (72.0bp,18.0bp).. controls (72.0bp,5.753bp) and (57.8bp,1.1977bp) .. (42.777bp,4.3342bp);
\draw (105.5bp,18.0bp) node {$\begin{array}{c}ix\geq 10\end{array}$};
\draw [-,thick] (18.0bp,74.028bp).. controls (18.0bp,70.568bp) and (18.0bp,58.416bp) .. (18.0bp,46.408bp);

\draw [-latex,thick] (46.098bp,14.865bp) -- (35.782bp,14.764bp); 
\draw [-latex,thick] (42.777bp,4.3342bp) -- (32.927bp,7.5026bp); 
\draw [-latex,thick] (18.0bp,46.408bp) -- (18.0bp,36.116bp); 
  \end{scope}
\end{tikzpicture}
};
\drawrecord(435.0bp,29.0bp){c}{ {ix,ix2,ix3} }{ {p} }{automc}

\node (automp) at (124.0bp,113.0bp) {
\begin{tikzpicture}[>=stealth',auto,scale = 1, transform shape]
  \begin{scope}[shift={(59.5bp,74.0bp)}]
\draw [color=blue!50,very thick,fill=blue!20](18.0bp,18.0bp) ellipse (16.0bp and 16.0bp);
\draw (18.0bp,18.0bp);
\draw [fill](18.0bp,76.0bp) ellipse (1.244448bp and 1.6bp);

\draw [-,thick] (35.037bp,24.379bp).. controls (44.858bp,25.681bp) and (54.0bp,23.555bp) .. (54.0bp,18.0bp);
\draw [-,thick] (54.0bp,18.0bp).. controls (54.0bp,14.528bp) and (50.429bp,12.396bp) .. (45.353bp,11.602bp);
\draw (80.5bp,18.0bp) node {$\begin{array}{c}x\geq 0\\x<10\end{array}$};
\draw [-,thick] (18.0bp,74.028bp).. controls (18.0bp,70.568bp) and (18.0bp,58.416bp) .. (18.0bp,46.408bp);

\draw [-latex,thick] (45.353bp,11.602bp) -- (35.037bp,11.621bp); 
\draw [-latex,thick] (18.0bp,46.408bp) -- (18.0bp,36.116bp); 
  \end{scope}
\end{tikzpicture}
};
\drawrecord(124.0bp,113.0bp){p}{ {} }{ {x} }{automp}

\connect{px}{cix}

\end{tikzpicture}

\end{document}
